<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.smhrd.mapper.RecruitMapper">

	
	<insert id="insertRecruit"
		parameterType="com.smhrd.entity.Recruit" useGeneratedKeys="true"
		keyProperty="rc_idx" keyColumn="RC_IDX">
		INSERT INTO RECRUITS (PRJ_IDX, RC_TITLE, RC_CONTENT, USER_ID, CLOSED_AT)
		VALUES (#{prj_idx}, #{rc_title}, #{rc_content}, #{user_id}, #{closed_at})
	</insert>
	
	<insert id="insertRecruitStacks">
		INSERT INTO RECRUIT_STACKS (RC_IDX, STACK_IDX)
		VALUES
		<foreach item="stack" collection="requiredSkills"
			separator=",">
			(#{rcIdx}, #{stack.stack_idx})
		</foreach>
	</insert>
	
	<select id="selectRcAll" resultType="com.smhrd.entity.Recruit">
		select * from RECRUITS
	</select>
	
	<select id="selectStacksByRcIdx" resultType="java.lang.Integer">
		select stack_idx from RECRUIT_STACKS where rc_idx=#{rc_idx}
	</select>
	
	<select id="selectStackNameByIdx" parameterType="int" resultType="java.lang.String">
		select stack_nm from TECH_STACKS where stack_idx=#{stack_idx}
	</select>
	
	<select id="selectRcByIdx" resultType="com.smhrd.entity.Recruit">
		select * from RECRUITS where rc_idx=#{rc_idx}
	</select>
	
	<select id="selectContestIdxByPrjIdx" resultType="java.lang.Integer">
		select contest_idx from PROJECTS where prj_idx=#{prj_idx}
	</select>
	
	<select id="selectContestByContestIdx" parameterType="int" resultType="com.smhrd.entity.Contest">	
		select * from CONTESTS where contest_idx=#{contest_idx}
	</select> 
	
	<select id="getRcTitleByIdx" resultType="java.lang.String">
		select rc_title from RECRUITS where rc_idx=#{rc_idx}
	</select>
</mapper>